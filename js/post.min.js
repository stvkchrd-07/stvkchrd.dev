document.addEventListener('DOMContentLoaded',()=>{if(!window.env||!window.env.SUPABASE_URL||!window.env.SUPABASE_ANON_KEY){console.warn('Supabase environment variables are not set. Skipping post load.');const e=document.getElementById('post-loading');e.innerHTML='<p class="text-lg text-red-600">Configuration error. Cannot connect to the database.</p>';return}const{createClient:e}=window.supabase,o=e(window.env.SUPABASE_URL,window.env.SUPABASE_ANON_KEY),n=()=>{const e=new URLSearchParams(window.location.search);return e.get('id')},t=async()=>{const e=n(),s=document.getElementById('post-loading'),a=document.getElementById('post-content-area'),l=document.getElementById('post-not-found');if(!e){s.classList.add('hidden'),l.classList.remove('hidden');return}try{const{data:e,error:n}=await o.from('posts').select('title, content, date').eq('id',e).single();if(n||!e)throw new Error('Post not found or database error.');document.title=`${e.title} | Satvik Chaturvedi`,document.getElementById('post-date').textContent=new Date(e.date).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'}),document.getElementById('post-title').textContent=e.title,window.marked?document.getElementById('post-body').innerHTML=marked.parse(e.content):(console.error('Marked.js library not found.'),document.getElementById('post-body').textContent='Error: Markdown parser not loaded.'),s.classList.add('hidden'),a.classList.remove('hidden')}catch(e){console.warn('Error loading post:',e.message),s.classList.add('hidden'),l.classList.remove('hidden')}};t()});