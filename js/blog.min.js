let supabaseClient;document.addEventListener('DOMContentLoaded',()=>{if(!window.env||!window.env.SUPABASE_URL||!window.env.SUPABASE_ANON_KEY){console.warn('Supabase environment variables are not set. Skipping blog load.');const e=document.querySelector('#blog-posts .space-y-8');e&&(e.innerHTML='<p class="text-red-600">Could not connect to the database. Configuration is missing.</p>');return}const{createClient:e}=window.supabase;supabaseClient=e(window.env.SUPABASE_URL,window.env.SUPABASE_ANON_KEY),loadPublicBlogPosts()});async function loadPublicBlogPosts(){if(!supabaseClient)return;const{data:e,error:o}=await supabaseClient.from('posts').select('*').order('date',{ascending:!1});if(o){console.warn('Error fetching posts:',o);return}const n=document.querySelector('#blog-posts .space-y-8');if(!n)return;n.innerHTML='',e.forEach(e=>{const o=document.createElement('div');o.className='border-2 border-black p-6 md:p-8 bg-white/80 backdrop-blur-sm';const t=e.content.substring(0,250)+(e.content.length>250?'...':''),s=marked.parse(t);o.innerHTML=`
            <p class="text-base mb-2">${new Date(e.date).toLocaleDateString()}</p>
            <h2 class="font-black text-3xl md:text-4xl mb-4">${e.title}</h2>
            <div class="text-lg mb-4 post-summary">${s}</div>
            <a href="post.html?id=${e.id}" class="font-bold underline hover:no-underline">Read More &rarr;</a>
        `,n.appendChild(o)})}function copyEmailToClipboard(e){const o=document.createElement('textarea');o.value=e,o.style.position='fixed',document.body.appendChild(o),o.focus(),o.select();try{document.execCommand('copy');const o=document.getElementById('copy-toast');o&&(o.textContent=`${e} copied to clipboard`,o.classList.add('show'),setTimeout(()=>{o.classList.remove('show')},800))}catch(e){console.error('Fallback: Oops, unable to copy',e)}document.body.removeChild(o)}